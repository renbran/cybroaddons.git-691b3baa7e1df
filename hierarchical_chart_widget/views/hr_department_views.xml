<?xml version="1.0" encoding="utf-8"?>
<odoo>
<!--    The view inherits from the existing 'hr.view_department_form' and modifies it to include a hierarchical chart widget.-->
    <record id="view_department_form" model="ir.ui.view">
        <field name="name">hr.department.view.form.inherit.hierarchical.chart.widget</field>
        <field name="model">hr.department</field>
        <field name="inherit_id" ref="hr.view_department_form"/>
        <field name="arch" type="xml">
            <xpath expr="//group" position="replace">
                <group>
                    <group col="1">
                        <field name="name" invisible="1"/> <!-- Remove in master -->
                        <field name="manager_id" widget="many2one_avatar_employee"/>
                        <field name="parent_id"/>
                        <field name="child_ids" invisible="1"/>
                        <field name="company_id"/>
                        <field name="color" widget="color_picker" string="Color"/>
                        <field name="is_parent_child" invisible="1"/>
                    </group>
                    <group col="4" name="org_chart"
                           invisible="(child_ids == [] and not is_parent_child and parent_id == False)"
                           style="margin-top:-32px;font-size: 16px">
                        <div id="department_right"
                             class="col-lg-4 px-0 ps-lg-5">
                            <field name="child_org_ids" class="position-relative"
                                   widget="org_chart" nolabel="1"/>
                        </div>
                    </group>
                </group>
            </xpath>
        </field>
    </record>
</odoo>
