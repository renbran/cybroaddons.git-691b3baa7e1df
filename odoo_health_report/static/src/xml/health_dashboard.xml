<?xml version="1.0" encoding="UTF-8"?>
<templates id="health_dashboard" xml:space="preserve">
    <t t-name="odoo_health_report.health_dashboard" owl="1">
        <div class="health_report">
            <body>
                <section class="container hr-main-section">
                    <!-- Side menu -->
                    <div class="hr-sidenav-menu">
                        <div class="hr-sidenav-menu-sticky">
                            <div class="hr-sidenav_menus-bg">
                                <div class="hr-sidebar-menu-position">
                                    <ul class="hr-sidenav_menus">
                                        <li t-attf-class="hr-sidenav_item #{state.activeMenu === 3 ? 'active' : '' }" t-on-click="() => setActiveComponent(3)">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" fill="none">
                                                <path d="M14.9994 23.0013V19.0013V23.0013ZM2.13541 16.62C1.66341 13.556 1.42874 12.0253 2.00741 10.6666C2.58607 9.30797 3.87141 8.37997 6.44074 6.52263L8.36074 5.13463C11.5567 2.82397 13.1554 1.66797 15.0007 1.66797C16.8434 1.66797 18.4407 2.82397 21.6381 5.13463L23.5581 6.52263C26.1274 8.37997 27.4114 9.3093 27.9914 10.6666C28.5701 12.0253 28.3354 13.556 27.8647 16.6186L27.4634 19.232C26.7967 23.5733 26.4621 25.744 24.9047 27.04C23.3474 28.336 21.0714 28.3346 16.5194 28.3346H13.4794C8.92607 28.3346 6.65007 28.3346 5.09274 27.04C3.53541 25.744 3.20207 23.5733 2.53541 19.2306L2.13541 16.62Z" fill="none"/>
                                                <path d="M14.9994 23.0013V19.0013M2.13541 16.62C1.66341 13.556 1.42874 12.0253 2.00741 10.6666C2.58607 9.30797 3.87141 8.37997 6.44074 6.52263L8.36074 5.13463C11.5567 2.82397 13.1554 1.66797 15.0007 1.66797C16.8434 1.66797 18.4407 2.82397 21.6381 5.13463L23.5581 6.52263C26.1274 8.37997 27.4114 9.3093 27.9914 10.6666C28.5701 12.0253 28.3354 13.556 27.8647 16.6186L27.4634 19.232C26.7967 23.5733 26.4621 25.744 24.9047 27.04C23.3474 28.336 21.0714 28.3346 16.5194 28.3346H13.4794C8.92607 28.3346 6.65007 28.3346 5.09274 27.04C3.53541 25.744 3.20207 23.5733 2.53541 19.2306L2.13541 16.62Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </li>
                                        <li class="hr-sidenav_item" t-on-click.stop.prevent="() => this.exitDashboard()">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24">
                                                <path fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 4h3a2 2 0 0 1 2 2v1m-5 13h3a2 2 0 0 0 2-2v-1M4.425 19.428l6 1.8A2 2 0 0 0 13 19.312V4.688a2 2 0 0 0-2.575-1.916l-6 1.8A2 2 0 0 0 3 6.488v11.024a2 2 0 0 0 1.425 1.916M16.001 12h5m0 0l-2-2m2 2l-2 2" />
                                            </svg>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- mobile menu -->
                    <div class="hr-mobile-menu_sticky">
                        <div class="hr-mobile-menu_bg">
                            <ul class="hr-mobile_menus">
                                <li t-attf-class="hr-mobile-menu_item #{state.activeMenu === 3 ? 'active' : '' }" t-on-click="() => setActiveComponent(3)">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" fill="none">
                                        <path d="M14.9994 23.0013V19.0013V23.0013ZM2.13541 16.62C1.66341 13.556 1.42874 12.0253 2.00741 10.6666C2.58607 9.30797 3.87141 8.37997 6.44074 6.52263L8.36074 5.13463C11.5567 2.82397 13.1554 1.66797 15.0007 1.66797C16.8434 1.66797 18.4407 2.82397 21.6381 5.13463L23.5581 6.52263C26.1274 8.37997 27.4114 9.3093 27.9914 10.6666C28.5701 12.0253 28.3354 13.556 27.8647 16.6186L27.4634 19.232C26.7967 23.5733 26.4621 25.744 24.9047 27.04C23.3474 28.336 21.0714 28.3346 16.5194 28.3346H13.4794C8.92607 28.3346 6.65007 28.3346 5.09274 27.04C3.53541 25.744 3.20207 23.5733 2.53541 19.2306L2.13541 16.62Z" fill="none"/>
                                        <path d="M14.9994 23.0013V19.0013M2.13541 16.62C1.66341 13.556 1.42874 12.0253 2.00741 10.6666C2.58607 9.30797 3.87141 8.37997 6.44074 6.52263L8.36074 5.13463C11.5567 2.82397 13.1554 1.66797 15.0007 1.66797C16.8434 1.66797 18.4407 2.82397 21.6381 5.13463L23.5581 6.52263C26.1274 8.37997 27.4114 9.3093 27.9914 10.6666C28.5701 12.0253 28.3354 13.556 27.8647 16.6186L27.4634 19.232C26.7967 23.5733 26.4621 25.744 24.9047 27.04C23.3474 28.336 21.0714 28.3346 16.5194 28.3346H13.4794C8.92607 28.3346 6.65007 28.3346 5.09274 27.04C3.53541 25.744 3.20207 23.5733 2.53541 19.2306L2.13541 16.62Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </li>
                                <li class="hr-mobile-menu_item" t-on-click.stop.prevent="() => this.exitDashboard()">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24">
                                        <path fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 4h3a2 2 0 0 1 2 2v1m-5 13h3a2 2 0 0 0 2-2v-1M4.425 19.428l6 1.8A2 2 0 0 0 13 19.312V4.688a2 2 0 0 0-2.575-1.916l-6 1.8A2 2 0 0 0 3 6.488v11.024a2 2 0 0 0 1.425 1.916M16.001 12h5m0 0l-2-2m2 2l-2 2" />
                                    </svg>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="w-100">
                        <t t-if="state.loading">
                            <div class="spinner-container">
                                <div class="spinner"/>
                                <div class="loading-text">Fetching the data... This may take a few moments. Please be patient.</div>
                            </div>
                        </t>
                        <t t-if="!state.loading">
                            <t t-if="state.activeComponent === 3">
                                <ModuleQuality setActiveComponent="setActiveComponent" onCanvasUpdate="handleCanvasUpdate"/>
                            </t>
                        </t>

                        <!--  Report Modal  -->
                        <div class="modal fade hr-modal" id="myModal" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered hr-modal_dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title hr-modal-title" id="myModalLabel">Report</h5>
                                    </div>
                                    <div class="modal-body hr-modal-body">
                                        <!--  Module -->
                                        <div class="form-check mb-4">
                                            <input class="form-check-input hr-form_input animated-checkbox" type="checkbox" value="" id="qualityCheck" style="width: 20px; height: 20px; border: 2px solid #007bff; border-radius: 4px; cursor: pointer;" t-model="state.module"/>
                                            <label class="form-check-label hr-form_label" for="qualityCheck" style="margin-left: 8px; font-weight: 500;">Module Quality</label>
                                        </div>
                                        <t t-if="state.module">
                                            <div style="display: flex; flex-direction: column; margin-bottom: 24px;">
                                                <label class="form-label" style="font-weight: 500; margin-bottom: 8px;">Installed Modules</label>
                                                <t t-if="state.select_module">
                                                    <div style="position: relative;">
                                                        <div t-on-click="() => state.showOptions = !state.showOptions" style="width: 98%; display: flex; flex-wrap: wrap; align-items: center; padding: 6px; border: 1px solid #d1d5db; border-radius: 12px; cursor: pointer; background-color: white; min-height: 46px; gap: 4px; box-shadow: none;" class="hr-custom-select">
                                                            <t t-set="selectedModules" t-value="Object.keys(state.module_selected_desc)" />
                                                            <t t-if="selectedModules.length">
                                                                <t t-foreach="selectedModules" t-as="module" t-key="module_index">
                                                                    <div style="display: flex; align-items: center; background-color: #e6f0ff; color: #000000; padding: 4px 8px; border-radius: 12px; font-size: 14px; margin: 2px;">
                                                                        <span style="margin-right: 6px;" t-log="module">
                                                                            <t t-esc="state.module_selected_desc[module]"/>
                                                                        </span>
                                                                        <div t-on-click="onModuleSelectDesc" t-att-data-mod-name="module"
                                                                             style="background-color: #007bff; color: white; width: 18px; height: 18px; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 12px; font-weight: bold; border-radius: 3px;">
                                                                            <svg width="8" height="7" viewBox="0 0 8 7" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M1 0.5L7 6.5L1 0.5ZM7 0.5L1 6.5L7 0.5Z" fill="white"/>
                                                                                <path d="M1 0.5L7 6.5M7 0.5L1 6.5" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
                                                                            </svg>
                                                                        </div>
                                                                    </div>
                                                                </t>
                                                            </t>
                                                            <t t-if="!selectedModules.length">
                                                                <span style="color: #6b7280;">Select your modules</span>
                                                            </t>

                                                            <!-- Arrow icon always visible -->
                                                            <div style="margin-left: auto;"/>
                                                        </div>
                                                        <!-- Dropdown menu -->
                                                        <t t-if="state.showOptions">
                                                            <div style="top: 100%; left: 0; width: 98%; background-color: white; border: none; border-radius: 0 0 12px 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); z-index: 999;  display: flex;position: relative;flex-direction: column;">
                                                                <div style="max-height: 200px; overflow-y: auto; padding: 8px 12px;">
                                                                    <t t-foreach="state.select_module" t-as="mod" t-key="mod_index">
                                                                        <div style="padding: 6px 0;">
                                                                            <label style="display: flex; align-items: center; cursor: pointer; width: 100%;">
                                                                                <input type="checkbox" t-att-value="mod.name" t-model="state.module_selected[mod.name]" style="display: none;" />
                                                                                <input class="form-check-input hr-form_input animated-checkbox" type="checkbox" t-att-checked="state.module_selected[mod.name]" id="serverCheck" t-on-click="onModuleSelect"
                                                                                       t-att-data-mod-name="mod.name" t-att-data-mod-shortdesc="mod.shortdesc" style="width: 24px; height: 24px; border: 2px solid #007bff; border-radius: 4px; cursor: pointer;" />
                                                                                <label for="serverCheck" style="margin-left: 10px;" t-att-data-mod-name="mod.name">
                                                                                    <t t-esc="mod.shortdesc"/>
                                                                                </label>
                                                                            </label>
                                                                        </div>
                                                                    </t>
                                                                </div>
                                                            </div>
                                                        </t>
                                                    </div>
                                                </t>
                                            </div>
                                        </t>

                                        <!--  Footer  -->
                                        <div class="d-flex justify-content-between hr-modal-footer" style="gap: 16px; padding-top: 16px; border-top: 1px solid #DEDEDE;">
                                            <button class="w-50 me-2 hr-primary_btn" style="padding: 12px; border-radius: 12px; border: none; background-color: #007bff; color: white; font-weight: 500; cursor: pointer; transition: background-color 0.2s ease;" t-on-click="onGenerateReport">Print report</button>
                                            <button class="hr-secondary_btn w-50" data-bs-dismiss="modal" aria-label="Close" style="padding: 12px; border-radius: 12px; border: 1px solid #6c757d; background-color: transparent; color: #6c757d; font-weight: 500; cursor: pointer; transition: all 0.2s ease;">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </body>
        </div>
    </t>
</templates>