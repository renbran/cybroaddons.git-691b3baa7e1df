<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_employee_form_trainer" model="ir.ui.view">
        <field name="name">hr.employee.view.form.inherited.gym.trainer</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='mobile_phone']" position="after">
                <field name="is_trainer"/>
            </xpath>

            <xpath expr="//page[@name='hr_settings']" position="after">
                <page name="trainer_skills" string="Trainer Skills" invisible="not is_trainer">
                    <group string="Current Gym Skills">
                        <field name="gym_skill_ids" widget="many2many_tags" readonly="1"/>
                    </group>

                    <group string="All Employee Skills">
                        <field name="skill_ids" nolabel="1" context="{'default_skill_type_id': False}"/>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <record id="hr_employee_trainer_action" model="ir.actions.act_window">
        <field name="name">Trainers</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.employee</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('is_trainer','=',True)]</field>
        <field name="context">{'default_is_trainer': True}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create your first Trainer!
            </p>
        </field>
    </record>

    <!-- Menu items -->
    <menuitem id="gym_trainer_root"
              name="Trainers"
              parent="gym_mgmt_system_menu_root"
              sequence="20"/>

    <menuitem id="gym_trainer_menu"
              name="Trainers"
              parent="gym_trainer_root"
              action="hr_employee_trainer_action"
              sequence="10"/>

    <record id="gym_skills_action" model="ir.actions.act_window">
        <field name="name">Trainer Skills</field>
        <field name="res_model">hr.skill</field>
        <field name="view_mode">list,form</field>
        <field name="domain">[('skill_type_id.is_gym_skill', '=', True)]</field>
        <field name="context">{}</field>
    </record>

    <menuitem id="gym_skills_menu"
              name="Trainer Skills"
              parent="gym_trainer_root"
              action="gym_skills_action"
              sequence="20"/>

    <record id="view_gym_skill_level_tree" model="ir.ui.view">
        <field name="name">hr.skill.level.view.tree.gym</field>
        <field name="model">hr.skill.level</field>
        <field name="arch" type="xml">
            <list string="Trainer Skill Levels" editable="bottom">
                <field name="name"/>
                <field name="level_progress" widget="progressbar" options="{'editable': true}"/>
                <field name="default_level" widget="boolean_toggle"/>
            </list>
        </field>
    </record>

    <!-- Add the missing action for skill levels -->
    <record id="gym_skill_levels_action" model="ir.actions.act_window">
        <field name="name">Trainer Skill Levels</field>
        <field name="res_model">hr.skill.level</field>
        <field name="view_mode">list,form</field>
        <field name="view_id" ref="view_gym_skill_level_tree"/>
        <field name="context">{}</field>
    </record>

    <menuitem id="gym_skill_levels_menu"
              name="Trainer Skill Levels"
              parent="gym_trainer_root"
              action="gym_skill_levels_action"
              sequence="30"/>
</odoo>